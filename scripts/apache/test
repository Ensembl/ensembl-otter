#!/usr/bin/perl -Tw

# Author:        jgrg
# Group:         anacode
# Maintainer:    jgrg

use strict;
use warnings;

BEGIN { use lib ($ENV{OTTER_PERL_INC} || q{}) =~ m{([^:]+)}g }
use SangerPaths qw{ core bioperl123 ensembl72 otter76 humpub };

use YAML 'Dump';
use Bio::Otter::Server::Test;
use Bio::Otter::ServerScriptSupport;

sub test {
    my ($server) = @_;

    my %out = Bio::Otter::Server::Test->generate($server);

    return $server->local_user ? Dump(\%out) : "You are an external user\n";
}

Bio::Otter::ServerScriptSupport->send_response(\&test);
