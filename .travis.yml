language: "perl"

perl:
  - "5.22"
os:
  - linux
services: docker

before_install:
    - docker pull miralum/otterserver
install:
    - cd ../
    - export ROOT_PATH=$PWD
    - mkdir app
    - cp -r $ROOT_PATH/ensembl-otter ./app
    - cd app
    - git clone --branch master --depth 1 https://github.com/Ensembl/team_tools.git
    - git clone --branch master --depth 1 https://github.com/Ensembl/webvm.git
    - git clone --branch master --depth 1 https://github.com/Ensembl/webvm-deps.git
    - git clone --branch master --depth 1 https://github.com/Ensembl/zircon.git




script: "docker run -d --name devtest -v $ROOT_PATH/app:/loutre mira/otterserver:latest"
